function fileSelected(){var e=document.querySelector("#displayInfo");if("显示信息"==e.innerHTML){var n=document.getElementById("file").files[0];if(n){var t=0;t=n.size>1048576?(Math.round(100*n.size/1048576)/100).toString()+"MB":(Math.round(100*n.size/1024)/100).toString()+"KB",document.getElementById("fileSize").innerHTML="大小: "+t,document.getElementById("fileType").innerHTML="类型: "+n.type,e.innerHTML="隐藏信息"}}else document.getElementById("fileSize").innerHTML="",document.getElementById("fileType").innerHTML="",e.innerHTML="显示信息"}function uploadFile(){var e=new FormData;e.append("file",document.getElementById("file").files[0]);var n=new XMLHttpRequest;n.upload.addEventListener("progress",uploadProgress,!1),n.addEventListener("load",uploadComplete,!1),n.addEventListener("error",uploadFailed,!1),n.addEventListener("abort",uploadCanceled,!1),n.open("POST","/upload_file"),n.send(e)}function uploadProgress(e){if(e.lengthComputable){var n=Math.round(100*e.loaded/e.total);document.getElementById("progress-value").innerHTML=n.toFixed(2)+"%",document.getElementById("mask").style.left=n.toFixed(2)+"%"}else document.getElementById("progress-value").innerHTML="unable to compute"}function uploadComplete(e){var n=e.target.responseText;document.getElementById("result").innerHTML=n,alert(n),document.getElementById("progress-value").innerHTML+=" (上传成功)"}function uploadFailed(e){alert("There was an error attempting to upload the file.")}function uploadCanceled(e){alert("The upload has been canceled by the user or the browser dropped the connection.")}window.addEventListener("load",function(){var e,n;e=document.querySelector("#file"),n=document.getElementById("fileName"),e.addEventListener("change",function(){n.innerHTML="已选: "+e.files[0].name})});